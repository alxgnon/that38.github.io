<!DOCTYPE html>
<html>
<head>
    <script type="module">
    import { MidiParser } from './js/MidiParser.js';
    
    async function analyzeMidi() {
        const response = await fetch('songs/classical/pachelbel_canon.mid');
        const arrayBuffer = await response.arrayBuffer();
        const parser = new MidiParser();
        
        try {
            const result = parser.parse(arrayBuffer);
            console.log('Parsed MIDI:', result);
            
            // Find first note
            let firstNoteTime = Infinity;
            for (const note of result.notes) {
                if (note.startMeasure < firstNoteTime) {
                    firstNoteTime = note.startMeasure;
                }
            }
            
            console.log('First note starts at measure:', firstNoteTime);
            console.log('Total measures needed:', result.measuresNeeded);
            console.log('First 10 notes:', result.notes.slice(0, 10));
        } catch (error) {
            console.error('Error parsing MIDI:', error);
        }
    }
    
    analyzeMidi();
    </script>
</head>
<body>
    Check console for MIDI timing analysis
</body>
</html>